<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="antozz">3antozzinho</div>
    <div class="buttons">
        <button class="btn" id="rock">Rock</button>
        <button class="btn" id="paper">Paper</button>
        <button class="btn" id="scissors">Scissors</button>
    </div>
    <div class="resultsTxt"></div>

    <script>
        console.log("Hello World!");
        let winner;
        let playerScore = 0;
        let computerScore = 0;
        let playerSelection;
        const buttons = document.querySelector(".buttons");
        let resultsContainer = document.querySelector(".resultsTxt");
        let playerChoice = document.createElement("div");
        playerChoice.classList.add("player");
        let computerChoice = document.createElement("div");
        computerChoice.classList.add("computer");
        let roundDecision = document.createElement("div");
        roundDecision.classList.add("decision");
        let score = document.createElement("div");
        score.classList.add("score");
        let matchResult = document.createElement("div");
        matchResult.classList.add("result");
        score.textContent = "You " + playerScore + ":" + computerScore + " Computer";
        resultsContainer.appendChild(score);
        buttons.addEventListener("click", (event) => {
                    switch (event.target.id) {
                        case "rock":
                            playerSelection = "rock";
                            break;
                        case "paper":
                            playerSelection = "paper";
                            break;
                        case "scissors":
                            playerSelection = "scissors";
                            break;
                    }
                    console.log("You chose: " + playerSelection);
                    game ();
                    playerChoice.textContent = "";
                    playerChoice.textContent += "You chose: " + playerSelection;
                    resultsContainer.insertBefore(playerChoice, roundDecision);
                    return playerSelection;


                })
        // const buttons = document.querySelectorAll(".btn");
        // console.log(buttons);

        // - create a function that will randomly return either rock paper or scissors.
        // - function returns the choice
        function getComputerChoice () {
            const picks = ["rock", "paper", "scissors"];
            const computerChoice = Math.floor(Math.random() * picks.length);
            return picks[computerChoice];
        }
        

        // - write a function that plays a single round of rock paper scissors, it takes 2 parameters (playerSelection and computerSelection)
        // - compare user input with computer's choice and declare the winner.
        // - return a string that declares the winner.
        function playRound(playerSelection, computerSelection) {
            if (playerSelection ==="rock") {
                if (computerSelection === "rock") {
                    console.log("it's a tie!");
                    roundDecision.textContent = "it's a tie!";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "tie"
                }
                else if (computerSelection === "paper") {
                    console.log("You lose! Paper beats Rock");
                    roundDecision.textContent = "You lose! Paper beats Rock";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "computer";
                }
                else if (computerSelection === "scissors") {
                    console.log("You win! Rock beats Scissors");
                    roundDecision.textContent = "You win! Rock beats Scissors";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "player";
                }
            }
            if (playerSelection === "paper") {
                if (computerSelection === "paper") {
                    console.log("it's a tie!");
                    roundDecision.textContent = "it's a tie!";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "tie"
                }
                else if (computerSelection === "scissors") {
                    console.log("You lose! scissors beats paper");
                    roundDecision.textContent = "You lose! scissors beats paper";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "computer";
                }
                else if (computerSelection === "rock") {
                    console.log("You win! Paper beats Rock");
                    roundDecision.textContent = "You win! Paper beats Rock";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "player";
                }
            }
            if (playerSelection === "scissors") {
                if (computerSelection === "scissors") {
                    console.log("it's a tie!");
                    roundDecision.textContent = "it's a tie!";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "tie"
                }
                else if (computerSelection === "rock") {
                    console.log("You lose! Rock beats Scissors");
                    roundDecision.textContent = "You lose! Rock beats Scissors";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "computer";
                }
                else if (computerSelection === "paper") {
                    console.log("You win! Scissors beats Paper");
                    roundDecision.textContent = "You win! Scissors beats Paper";
                    resultsContainer.appendChild(roundDecision);
                    return winner = "player";
                }
            }
        }
        // - prompt the user to choose rock paper or scissors.

        // - write a new function that uses the previous function to play 5 round game that keeps score and reports a winner or loser at the end.
        function game() {
            let computerSelection = getComputerChoice();
            console.log("The computer chose: " + computerSelection );
            computerChoice.textContent = "";
            computerChoice.textContent += "The computer chose: " + computerSelection;
            resultsContainer.appendChild(computerChoice);
            if (computerScore != 3 && playerScore != 3){
                matchResult.textContent = "";

                // playerSelection = prompt ("rock, paper or scissors ?");
                // if (playerSelection === null) {
                //     game ();
                // }
                // else {
                //     playerSelection = playerSelection.toLowerCase();

                // if (playerSelection != "rock" && playerSelection != "paper" && playerSelection != "scissors") {
                //     game();
                // }
                
                // else {
                    
                playRound(playerSelection, computerSelection);
                if (winner === "player") {
                    playerScore++;
                    console.log ("Player " + playerScore + ":" + computerScore + " Computer");
                    score.textContent = "You " + playerScore + ":" + computerScore + " Computer";
                    resultsContainer.appendChild(score);
                }
                else if (winner === "computer") {
                    computerScore++;
                    console.log ("Player " + playerScore + ":" + computerScore + " Computer");
                    score.textContent = "You " + playerScore + ":" + computerScore + " Computer";
                    resultsContainer.appendChild(score);
                }
                else {
                    console.log ("Player " + playerScore + ":" + computerScore + " Computer");
                    score.textContent = "You " + playerScore + ":" + computerScore + " Computer";
                    resultsContainer.appendChild(score);
                }
                 
            if (computerScore === 3 || playerScore === 3) {
                if (computerScore > playerScore) {
                    console.log ("Computer wins!");
                    matchResult.textContent = "Computer wins!";
                    resultsContainer.appendChild(matchResult);
                    
                }
                else {
                    console.log ("Congratulations! You win!");
                    matchResult.textContent = "Congratulations! You win!";
                    resultsContainer.appendChild(matchResult);
                }
                computerScore = 0;
                playerScore = 0;
            }
                // }
                
        }

                }
                










    </script>
    
</body>
</html>